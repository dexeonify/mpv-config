# Whether skipsilence should be enabled by default. Can also be changed
# at runtime and reflects the current enabled state.
enabled=no

# The silence threshold in decibel. Anything quieter than this is
# detected as silence. Can be adjusted with the threshold-up,
# threshold-down bindings, and adjust-threshold-db script message.
threshold_db=-24
# Minimum duration of silence to be detected, in seconds. This is
# measured in stream time, as if playback speed was 1.
threshold_duration=0.2
# How long to wait before speedup. This is measured in real time, thus
# higher playback speeds would reduce the length of content skipped.
startdelay=0

# How often to update the speed during silence, in seconds of real time.
speed_updateinterval=0.05
# The maximum playback speed during silence.
speed_max=4

# Speedup ramp parameters. The formula for playback speedup is:
#
#     ramp_constant + (time * ramp_factor) ^ ramp_exponent
#
# Where time is the real time passed since start of speedup.
# The result is multiplied with the original playback speed.
#
# - ramp_constant should always be greater or equal to one, otherwise it
#   will slow down at the start of silence.
# - Setting ramp_factor to 0 disables the ramp, resulting in a constant
#   speed during silence.
# - ramp_exponent is the "acceleration" of the curve. A value of 1
#   results in a linear curve, values above 1 increase the speed faster
#   the more time has passed, while values below 1 speed up at
#   decreasing intervals.
# - The more aggressive this curve is configured, the faster
#   audio and video is desynchronized. If video stutters and drops frames
#   when silence starts, reduce ramp_constant to improve this problem.
ramp_constant=1
ramp_factor=0.8
ramp_exponent=1.6

# Noise reduction filter configuration.
#
# This allows removing noise from the audio stream before the
# silencedetect filter, allowing to speed up pauses in speech despite
# background noise. The output audio is unaffected by default.
#
# Whether the detected audio signal should be preprocessed with arnndn.
# If arnndn_modelpath is empty, this has no effect
arnndn_enable=yes
# Path to the rnnn file containing the model parameters. If empty,
# noise reduction is disabled.
# The mpv config path can be referenced with the prefix '~~/'.
# Avoid special characters in this option, they must be escaped to
# work with "af add lavfi=[arnndn='...']".
arnndn_modelpath=
# Whether the denoised signal should be used as the output. Disabled by
# default, so the output is unaffected.
arnndn_output=no

# If >= 0, use this value instead of a playback speed of 1.
# This is a work around to stop audio clicks when switching between
# normal playback and speeding up. Playing back at a slightly different
# speed (e.g. 1.01x), keeps the scaletempo2 filter active, so audio is
# played back without interruptions.
alt_normal_speed=-1

# When disabling skipsilence, fix audio sync if this many frames have
# been dropped since the last playback restart (seek, etc.).
# Disabled if value is less than 0.
#
# When disabling skipsilence while frame-drop-count is greater or equal
# to configured value, audio-video sync is fixed by running
# 'seek 0 exact'. May produce a short pause and/or audio repeat.
#
# Note that frame-drop-count does not exactly correspond to the
# audio-video desynchronization. It is used as a proxy to avoid
# resyncing every time the script is disabled. Recommended value: 100.
resync_threshold_droppedframes=-1

# Info style used for the 'user-data/skipsilence/info' property and
# the default of the 'info' script-message/binding.
# May be one of
# - 'off' (no information),
# - 'total' (show total saved time),
# - 'compact' (show total and latest saved time),
# - 'verbose' (show most information).
infostyle=verbose

# When to reset the total saved time.
# May be one of
# - 'file-start' (when a new file starts)
# - 'never' (do not reset total)
reset_total=file-start

# How to apply external speed change during silence.
# This makes speed change bindings work during fast forward. Set the
# value according to what command you use to change speed:
# - 'add' - add the difference to the normal speed
# - 'multiply' - multiply the normal speed with factor of change
# If 'off', the script will override the speed during silence.
# Note: this option is unreliable in cases where the script changes speed
# at the exact same time. Prefer the adjust-speed message instead.
apply_speed_change=off

debug=no
